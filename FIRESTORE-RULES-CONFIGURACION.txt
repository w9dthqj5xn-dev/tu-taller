// ============================================
// REGLAS DE FIRESTORE COMPLETAS - TU TALLER
// ============================================
// ‚ú® INCLUYE TODAS LAS COLECCIONES:
//    - Licencias (panel admin)
//    - Usuarios (sistema de registro)
//    - Usuarios Google (login con Google)
//    - Usuarios-data (datos del taller)
//    - Configuraciones (NUEVO: personalizaci√≥n del taller)
//
// üìã INSTRUCCIONES PARA APLICAR:
// 1. Ve a: https://console.firebase.google.com/
// 2. Selecciona: "licencias-taller"
// 3. Click en: "Firestore Database" ‚Üí "Reglas"
// 4. REEMPLAZA todo con este c√≥digo
// 5. Click en: "Publicar"
// ============================================

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ============================================
    // LICENCIAS - Sistema de licencias
    // ============================================
    match /licencias/{license} {
      allow read, write, delete: if true;
    }
    
    // ============================================
    // USUARIOS - Registro con licencia
    // ============================================
    match /usuarios/{user} {
      allow read, write, delete: if true;
    }
    
    // ============================================
    // USUARIOS GOOGLE - Autenticaci√≥n con Google
    // ============================================
    match /usuarios-google/{userId} {
      allow read, write, delete: if request.auth != null;
      allow read, write, delete: if true;
    }
    
    // ============================================
    // USUARIOS-DATA - Datos del taller
    // ============================================
    // Clientes, √≥rdenes, repuestos, pagos
    match /usuarios-data/{userId} {
      allow read, write, delete: if true;
      
      match /{collection}/{document=**} {
        allow read, write, delete: if true;
      }
    }
    
    // ============================================
    // ‚ú® CONFIGURACIONES - Personalizaci√≥n del taller
    // ============================================
    // NUEVO: Logo, direcci√≥n, pol√≠ticas personalizadas
    // Cada usuario tiene su propia configuraci√≥n
    match /configuraciones/{userId} {
      // Permitir acceso completo (mismo patr√≥n que usuarios-data)
      allow read, write, delete: if true;
    }
  }
}

// ============================================
// ‚úÖ QU√â INCLUYE ESTA VERSI√ìN:
// ============================================
// 1. ‚úÖ Licencias - Panel de administraci√≥n
// 2. ‚úÖ Usuarios - Sistema de registro
// 3. ‚úÖ Usuarios Google - Login con Google
// 4. ‚úÖ Usuarios-data - Datos del taller (clientes, √≥rdenes, etc)
// 5. ‚ú® Configuraciones - Logo y personalizaci√≥n (NUEVO)
//
// ‚ö†Ô∏è NOTA: Estas reglas son permisivas (allow: if true)
// porque tu sistema usa autenticaci√≥n con localStorage
// en lugar de Firebase Auth para usuarios normales.
// ============================================
